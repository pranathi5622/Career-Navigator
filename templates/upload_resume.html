{% extends 'base.html' %}

{% block title %}Upload Resume - Career Compass{% endblock %}

{% block content %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold">Upload Your Resume</h1>
            <p class="lead">
                {% if path_type == 'roadmap' %}
                    We'll analyze your resume to create a personalized career roadmap
                {% elif path_type == 'comparison' %}
                    We'll analyze your resume to provide a tailored career comparison
                {% else %}
                    We'll analyze your resume to enhance your career recommendations
                {% endif %}
            </p>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <h3 class="card-title mb-4">
                            {% if path_type == 'roadmap' %}
                                Step 2: Upload Your Resume
                            {% elif path_type == 'comparison' %}
                                Step 2: Upload Your Resume
                            {% else %}
                                Step 1: Upload Your Resume
                            {% endif %}
                        </h3>
                        
                        <form action="{{ url_for('upload_resume', path_type=path_type) }}" method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                            <div class="mb-4">
                                <label for="resume" class="form-label">Upload your resume (PDF format)</label>
                                <input type="file" class="form-control" id="resume" name="resume" accept=".pdf" required>
                                <div class="invalid-feedback">Please select a PDF file.</div>
                                <div class="form-text">Your resume helps us analyze your skills and experience to provide more relevant guidance.</div>
                            </div>
                            
                            <div class="alert alert-info" role="alert">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-info-circle fa-lg mt-1"></i>
                                    </div>
                                    <div class="ms-3">
                                        <h5 class="alert-heading">How we use your resume</h5>
                                        <p class="mb-0">We extract your skills, education, and experience from your resume to provide personalized guidance. Your resume data is processed securely and is not stored permanently.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">Upload and Continue</button>
                                <a href="{% if path_type == 'recommendation' %}{{ url_for('questionnaire') }}{% else %}{{ url_for('index') }}{% endif %}" class="btn btn-outline-secondary">
                                    {% if path_type == 'recommendation' %}
                                        Skip to Questionnaire
                                    {% else %}
                                        Skip This Step
                                    {% endif %}
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="card mt-4 shadow-sm">
                    <div class="card-body p-4">
                        <h4 class="card-title mb-3">Resume Tips for Better Results</h4>
                        
                        <div class="d-flex mb-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-check-circle text-success fa-lg mt-1"></i>
                            </div>
                            <div class="ms-3">
                                <h5>Include detailed skills</h5>
                                <p class="text-muted mb-0">List specific technical skills, software proficiency, and other relevant abilities.</p>
                            </div>
                        </div>
                        
                        <div class="d-flex mb-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-check-circle text-success fa-lg mt-1"></i>
                            </div>
                            <div class="ms-3">
                                <h5>Specify education clearly</h5>
                                <p class="text-muted mb-0">Include degrees, certifications, and relevant coursework with completion dates.</p>
                            </div>
                        </div>
                        
                        <div class="d-flex mb-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-check-circle text-success fa-lg mt-1"></i>
                            </div>
                            <div class="ms-3">
                                <h5>Quantify experience</h5>
                                <p class="text-muted mb-0">Include years of experience and measurable achievements in each role.</p>
                            </div>
                        </div>
                        
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-check-circle text-success fa-lg mt-1"></i>
                            </div>
                            <div class="ms-3">
                                <h5>Use standard formatting</h5>
                                <p class="text-muted mb-0">Ensure your PDF is machine-readable (not scanned) for better extraction results.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block additional_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const resumeInput = document.getElementById('resume');
        
        resumeInput.addEventListener('change', function() {
            // Check file extension
            const fileName = this.value;
            const fileExtension = fileName.split('.').pop().toLowerCase();
            
            if (fileExtension !== 'pdf') {
                alert('Please upload a PDF file only.');
                this.value = '';
            }
            
            // Check file size (max 16MB)
            if (this.files[0] && this.files[0].size > 16 * 1024 * 1024) {
                alert('File size exceeds 16MB. Please upload a smaller file.');
                this.value = '';
            }
        });
    });
</script>
{% endblock %}
